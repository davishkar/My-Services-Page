<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Avishkar Digital Studio - Customer Reviews</title>
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  
  <!-- External Libraries -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="57x57" href="../favicon_io/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../favicon_io/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../favicon_io/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../favicon_io/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../favicon_io/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../favicon_io/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../favicon_io/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../favicon_io/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="../favicon_io/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="../favicon_io/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="../favicon_io/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../favicon_io/favicon-16x16.png">
  <link rel="manifest" href="../favicon_io/manifest.json">
  <link rel="shortcut icon" href="../favicon_io/favicon.ico" type="image/x-icon">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="../favicon_io/ms-icon-144x144.png">
  <meta name="theme-color" content="#667eea">

  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      --danger-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
      --dark-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      --light-bg: rgba(255, 255, 255, 0.95);
      --glass-bg: rgba(255, 255, 255, 0.1);
      --text-primary: #2d3748;
      --text-secondary: #4a5568;
      --text-muted: #718096;
      --border-color: #e2e8f0;
      --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 10px 25px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.15);
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 20px;
      --radius-xl: 24px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--primary-gradient);
      min-height: 100vh;
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Animated Background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--primary-gradient);
      z-index: -2;
    }

    body::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.08)"/><circle cx="10" cy="50" r="0.5" fill="rgba(255,255,255,0.06)"/><circle cx="90" cy="30" r="0.5" fill="rgba(255,255,255,0.04)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat;
      z-index: -1;
      animation: float 20s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(30px, -30px) rotate(120deg); }
      66% { transform: translate(-20px, 20px) rotate(240deg); }
    }

    /* Header Styles */
    .header {
      background: var(--dark-gradient);
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      position: relative;
      overflow: hidden;
      border-radius: 0 0 var(--radius-xl) var(--radius-xl);
      margin-bottom: 2rem;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: pulse 4s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(0.8) rotate(0deg); opacity: 0.5; }
      50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
    }

    .header-content {
      position: relative;
      z-index: 2;
      max-width: 1200px;
      margin: 0 auto;
    }

    .header h1 {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 800;
      margin-bottom: 0.5rem;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      animation: slideInDown 1s ease-out;
    }

    .header .subtitle {
      font-size: clamp(1rem, 2.5vw, 1.3rem);
      opacity: 0.9;
      font-weight: 400;
      margin-bottom: 1.5rem;
      animation: slideInUp 1s ease-out 0.2s both;
    }

    .breadcrumbs {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      opacity: 0.8;
      animation: fadeIn 1s ease-out 0.4s both;
    }

    .breadcrumbs a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: var(--radius-md);
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .breadcrumbs a:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
      color: white;
    }

    /* Animations */
    @keyframes slideInDown {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes slideInUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes scaleIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    /* Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem 2rem;
    }

    /* Rating Overview */
    .rating-overview {
      background: var(--secondary-gradient);
      color: white;
      padding: 2.5rem;
      border-radius: var(--radius-xl);
      margin-bottom: 2rem;
      text-align: center;
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
      animation: scaleIn 0.8s ease-out;
    }

    .rating-overview::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: rotate 15s linear infinite;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .rating-overview-content {
      position: relative;
      z-index: 2;
    }

    .overall-rating {
      font-size: clamp(3rem, 8vw, 5rem);
      font-weight: 800;
      margin-bottom: 1rem;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      background: linear-gradient(45deg, #fff, #f0f0f0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .rating-stars {
      font-size: clamp(1.5rem, 4vw, 2rem);
      margin-bottom: 1rem;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .rating-text {
      font-size: clamp(1rem, 2.5vw, 1.3rem);
      opacity: 0.95;
      font-weight: 500;
    }

    /* Card Styles */
    .card {
      background: var(--light-bg);
      backdrop-filter: blur(20px);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-lg);
      margin-bottom: 2rem;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.2);
      animation: scaleIn 0.8s ease-out;
    }

    .card-header {
      padding: 2rem 2rem 0;
    }

    .card-body {
      padding: 0 2rem 2rem;
    }

    .card-title {
      font-size: clamp(1.5rem, 3vw, 2rem);
      font-weight: 700;
      margin-bottom: 1.5rem;
      color: var(--text-primary);
      text-align: center;
      position: relative;
    }

    .card-title::after {
      content: '';
      position: absolute;
      bottom: -0.5rem;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 4px;
      background: var(--primary-gradient);
      border-radius: 2px;
    }

    /* Rating Breakdown */
    .rating-row {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
      padding: 0.5rem 0;
    }

    .rating-label {
      font-weight: 600;
      color: var(--text-secondary);
      font-size: 0.9rem;
      min-width: 60px;
    }

    .progress-container {
      height: 12px;
      background: #f7fafc;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .progress-bar {
      height: 100%;
      border-radius: 6px;
      transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .progress-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .bar-5 { background: linear-gradient(90deg, #48bb78, #38a169); }
    .bar-4 { background: linear-gradient(90deg, #4299e1, #3182ce); }
    .bar-3 { background: linear-gradient(90deg, #ed8936, #dd6b20); }
    .bar-2 { background: linear-gradient(90deg, #f56565, #e53e3e); }
    .bar-1 { background: linear-gradient(90deg, #fc8181, #f56565); }

    .rating-count {
      font-weight: 700;
      color: var(--text-primary);
      font-size: 0.9rem;
      min-width: 30px;
      text-align: right;
    }

    /* Form Styles */
    .form-container {
      background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85));
      backdrop-filter: blur(20px);
      border-radius: var(--radius-xl);
      padding: 2.5rem;
      box-shadow: var(--shadow-lg);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
      font-weight: 600;
      color: var(--text-secondary);
      font-size: 0.95rem;
    }

    .form-input,
    .form-textarea {
      width: 100%;
      padding: 1rem 1.25rem;
      border: 2px solid var(--border-color);
      border-radius: var(--radius-md);
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
    }

    .form-input:focus,
    .form-textarea:focus {
      outline: none;
      border-color: #667eea;
      background: rgba(255, 255, 255, 0.95);
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
      transform: translateY(-2px);
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
      font-family: inherit;
    }

    /* Star Rating */
    .rating-selector {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
      padding: 1rem;
      background: rgba(102, 126, 234, 0.05);
      border-radius: var(--radius-md);
      border: 1px solid rgba(102, 126, 234, 0.1);
    }

    .rating-label-text {
      font-weight: 600;
      color: var(--text-secondary);
      font-size: 1rem;
    }

    .star-rating {
      display: flex;
      gap: 0.25rem;
    }

    .star {
      font-size: 2rem;
      color: #e2e8f0;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
    }

    .star:hover,
    .star.active {
      color: #fbbf24;
      transform: scale(1.15) rotate(5deg);
    }

    /* Submit Button */
    .submit-btn {
      background: var(--primary-gradient);
      color: white;
      border: none;
      padding: 1rem 2.5rem;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: block;
      margin: 2rem auto 0;
      min-width: 200px;
      font-family: inherit;
      box-shadow: var(--shadow-md);
      position: relative;
      overflow: hidden;
    }

    .submit-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .submit-btn:hover::before {
      left: 100%;
    }

    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
    }

    .submit-btn:active {
      transform: translateY(-1px);
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Reviews List */
    .review-item {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
    }

    .review-item:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
      background: rgba(255, 255, 255, 0.9);
    }

    .review-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1rem;
      gap: 1rem;
    }

    .reviewer-info {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex: 1;
    }

    .reviewer-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1.2rem;
      box-shadow: var(--shadow-sm);
      flex-shrink: 0;
    }

    .reviewer-details h4 {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
    }

    .reviewer-details p {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .review-rating {
      color: #fbbf24;
      font-size: 1.3rem;
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
      flex-shrink: 0;
    }

    .review-text {
      color: var(--text-secondary);
      line-height: 1.7;
      font-size: 1rem;
    }

    .loading,
    .no-reviews {
      text-align: center;
      padding: 3rem 1rem;
      color: var(--text-muted);
      font-size: 1.1rem;
      background: rgba(255, 255, 255, 0.5);
      border-radius: var(--radius-lg);
      border: 2px dashed var(--border-color);
    }

    .loading i,
    .no-reviews i {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }

    /* Success Message */
    .success-message {
      background: var(--success-gradient);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: var(--radius-md);
      margin: 1rem 0;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      box-shadow: var(--shadow-sm);
      animation: slideInDown 0.5s ease-out;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 0 0.75rem 1rem;
      }
      
      .header {
        padding: 1.5rem 0.75rem;
        margin-bottom: 1rem;
      }
      
      .card-header,
      .card-body {
        padding: 1.5rem;
      }
      
      .form-container {
        padding: 1.5rem;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .rating-selector {
        flex-direction: column;
        align-items: center;
        gap: 1rem;
      }
      
      .review-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.75rem;
      }
      
      .reviewer-info {
        width: 100%;
      }
      
      .review-rating {
        align-self: flex-start;
      }
      
      .breadcrumbs {
        flex-wrap: wrap;
        gap: 0.25rem;
      }
    }

    @media (max-width: 480px) {
      .rating-overview {
        padding: 2rem 1rem;
      }
      
      .star {
        font-size: 1.5rem;
      }
      
      .submit-btn {
        width: 100%;
        padding: 1rem;
      }
      
      .form-container {
        padding: 1rem;
      }
    }

    /* Loading Animation */
    .spinner {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Scroll to top button */
    .scroll-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 50px;
      height: 50px;
      background: var(--primary-gradient);
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      transition: all 0.3s ease;
      opacity: 0;
      visibility: hidden;
      z-index: 1000;
    }

    .scroll-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .scroll-top:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-content">
      <h1><i class="fas fa-star"></i> Avishkar Digital Studio</h1>
      <p class="subtitle">Customer Reviews & Feedback</p>
      <nav class="breadcrumbs">
        <a href="../index.html"><i class="fas fa-home"></i> Home</a>
        <a href="#"><i class="fas fa-star"></i> Reviews</a>
      </nav>
    </div>
  </div>

  <div class="container">
    <!-- Rating Overview -->
    <div class="rating-overview">
      <div class="rating-overview-content">
        <div class="overall-rating" id="overallRating">0.0</div>
        <div class="rating-stars" id="overallStars">
          <i class="far fa-star"></i>
          <i class="far fa-star"></i>
          <i class="far fa-star"></i>
          <i class="far fa-star"></i>
          <i class="far fa-star"></i>
        </div>
        <div class="rating-text" id="ratingText">Based on 0 reviews</div>
      </div>
    </div>

    <!-- Rating Breakdown -->
    <div class="card">
      <div class="card-header">
        <h3 class="card-title"><i class="fas fa-chart-bar"></i> Rating Breakdown</h3>
      </div>
      <div class="card-body">
        <div class="rating-row">
          <div class="rating-label">5 star</div>
          <div class="progress-container">
            <div class="progress-bar bar-5" id="bar-5" style="width:0%"></div>
          </div>
          <div class="rating-count" id="count-5">0</div>
        </div>
        
        <div class="rating-row">
          <div class="rating-label">4 star</div>
          <div class="progress-container">
            <div class="progress-bar bar-4" id="bar-4" style="width:0%"></div>
          </div>
          <div class="rating-count" id="count-4">0</div>
        </div>
        
        <div class="rating-row">
          <div class="rating-label">3 star</div>
          <div class="progress-container">
            <div class="progress-bar bar-3" id="bar-3" style="width:0%"></div>
          </div>
          <div class="rating-count" id="count-3">0</div>
        </div>
        
        <div class="rating-row">
          <div class="rating-label">2 star</div>
          <div class="progress-container">
            <div class="progress-bar bar-2" id="bar-2" style="width:0%"></div>
          </div>
          <div class="rating-count" id="count-2">0</div>
        </div>
        
        <div class="rating-row">
          <div class="rating-label">1 star</div>
          <div class="progress-container">
            <div class="progress-bar bar-1" id="bar-1" style="width:0%"></div>
          </div>
          <div class="rating-count" id="count-1">0</div>
        </div>
      </div>
    </div>

    <!-- Review Form -->
    <div class="card">
      <div class="card-header">
        <h3 class="card-title"><i class="fas fa-edit"></i> Share Your Experience</h3>
      </div>
      <div class="card-body">
        <div class="form-container">
          <form id="reviewForm">
            <div class="form-grid">
              <div class="form-group">
                <label class="form-label" for="userName">
                  <i class="fas fa-user"></i> Your Name *
                </label>
                <input type="text" id="userName" class="form-input" required placeholder="Enter your full name">
              </div>
              <div class="form-group">
                <label class="form-label" for="userEmail">
                  <i class="fas fa-envelope"></i> Email Address *
                </label>
                <input type="email" id="userEmail" class="form-input" required placeholder="Enter your email">
              </div>
            </div>
            
            <div class="form-group">
              <label class="form-label" for="userReview">
                <i class="fas fa-comment"></i> Your Review *
              </label>
              <textarea id="userReview" class="form-textarea" required 
                placeholder="Share your detailed experience with our services... Tell us what you loved, what could be improved, and any recommendations you have for others."></textarea>
            </div>
            
            <div class="form-group">
              <div class="rating-selector">
                <span class="rating-label-text">
                  <i class="fas fa-star-half-alt"></i> Your Rating:
                </span>
                <div class="star-rating" id="starRating">
                  <span class="star" data-rating="1"><i class="fas fa-star"></i></span>
                  <span class="star" data-rating="2"><i class="fas fa-star"></i></span>
                  <span class="star" data-rating="3"><i class="fas fa-star"></i></span>
                  <span class="star" data-rating="4"><i class="fas fa-star"></i></span>
                  <span class="star" data-rating="5"><i class="fas fa-star"></i></span>
                </div>
              </div>
            </div>
            
            <button type="submit" class="submit-btn" id="submitBtn">
              <i class="fas fa-paper-plane"></i> Submit Review
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Reviews List -->
    <div class="card">
      <div class="card-header">
        <h3 class="card-title"><i class="fas fa-comments"></i> Customer Reviews</h3>
      </div>
      <div class="card-body">
        <div id="reviewsList">
          <div class="loading">
            <i class="fas fa-spinner fa-spin"></i>
            <div>Loading reviews...</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll to Top Button -->
  <button class="scroll-top" id="scrollTop">
    <i class="fas fa-arrow-up"></i>
  </button>

  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAP-MhbZCeigYuKVSDlidl-SJPkwJnaiA8",
      authDomain: "avishkarstudio-82406.firebaseapp.com",
      projectId: "avishkarstudio-82406",
      storageBucket: "avishkarstudio-82406.firebasestorage.app",
      messagingSenderId: "365415246841",
      appId: "1:365415246841:web:858339693f2a1762d96b28",
      measurementId: "G-597DBSP668"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let selectedRating = 5;

    // DOM Elements
    const stars = document.querySelectorAll('.star');
    const reviewForm = document.getElementById('reviewForm');
    const submitBtn = document.getElementById('submitBtn');
    const scrollTopBtn = document.getElementById('scrollTop');

    // Initialize Application
    document.addEventListener('DOMContentLoaded', function() {
      initializeStarRating();
      initializeScrollToTop();
      loadReviews();
      
      // Add form submission handler
      reviewForm.addEventListener('submit', handleFormSubmit);
    });

    // Star Rating Functionality
    function initializeStarRating() {
      stars.forEach(star => {
        star.addEventListener('click', () => {
          selectedRating = parseInt(star.dataset.rating);
          updateStarDisplay();
        });

        star.addEventListener('mouseenter', () => {
          const hoverRating = parseInt(star.dataset.rating);
          highlightStars(hoverRating);
        });
      });

      document.getElementById('starRating').addEventListener('mouseleave', () => {
        updateStarDisplay();
      });

      // Initialize with 5 stars selected
      updateStarDisplay();
    }

    function highlightStars(rating) {
      stars.forEach((star, index) => {
        if (index < rating) {
          star.classList.add('active');
        } else {
          star.classList.remove('active');
        }
      });
    }

    function updateStarDisplay() {
      highlightStars(selectedRating);
    }

    // Form Submission
    function handleFormSubmit(e) {
      e.preventDefault();
      submitReview();
    }

    function submitReview() {
      const name = document.getElementById("userName").value.trim();
      const email = document.getElementById("userEmail").value.trim();
      const review = document.getElementById("userReview").value.trim();
      
      // Validation
      if (!name || !email || !review) {
        showNotification('Please fill in all required fields.', 'error');
        return;
      }

      if (!isValidEmail(email)) {
        showNotification('Please enter a valid email address.', 'error');
        return;
      }

      // Show loading state
      setSubmitButtonLoading(true);

      // Submit to Firebase
      db.collection("reviews").add({
        name: name,
        email: email,
        review: review,
        rating: selectedRating,
        timestamp: new Date(),
        approved: true // Auto-approve for now, you can add moderation later
      }).then(() => {
        // Success
        resetForm();
        setSubmitButtonLoading(false);
        showNotification('Thank you for your review! It has been submitted successfully.', 'success');
        loadReviews();
        
        // Scroll to reviews section
        setTimeout(() => {
          document.getElementById('reviewsList').scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start' 
          });
        }, 1000);
      }).catch((error) => {
        console.error("Error adding review: ", error);
        setSubmitButtonLoading(false);
        showNotification('Error submitting review. Please try again.', 'error');
      });
    }

    function resetForm() {
      reviewForm.reset();
      selectedRating = 5;
      updateStarDisplay();
    }

    function setSubmitButtonLoading(loading) {
      if (loading) {
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<span class="spinner"></span> Submitting...';
      } else {
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Review';
      }
    }

    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    // Load and Display Reviews
    function loadReviews() {
      const reviewsList = document.getElementById('reviewsList');
      
      db.collection("reviews")
        .where("approved", "==", true)
        .orderBy("timestamp", "desc")
        .get()
        .then(snapshot => {
          let total = 0, count = 0;
          const ratingCounts = {1:0, 2:0, 3:0, 4:0, 5:0};
          const reviewsHtml = [];

          if (snapshot.empty) {
            reviewsList.innerHTML = `
              <div class="no-reviews">
                <i class="fas fa-star-half-alt"></i>
                <div>No reviews yet. Be the first to share your experience!</div>
              </div>
            `;
            updateRatingDisplay(0, 0, ratingCounts);
            return;
          }

          snapshot.forEach(doc => {
            const data = doc.data();
            total += data.rating;
            count++;
            ratingCounts[data.rating]++;
            
            // Create review HTML
            const reviewDate = data.timestamp ? 
              formatDate(data.timestamp.toDate()) : 'Recent';
            const initials = getInitials(data.name);
            
            reviewsHtml.push(createReviewHTML(data, initials, reviewDate));
          });

          // Update displays
          updateRatingDisplay(total, count, ratingCounts);
          reviewsList.innerHTML = reviewsHtml.join('');
          
          // Add entrance animation to reviews
          animateReviews();
        })
        .catch((error) => {
          console.error("Error loading reviews: ", error);
          reviewsList.innerHTML = `
            <div class="no-reviews">
              <i class="fas fa-exclamation-triangle"></i>
              <div>Error loading reviews. Please refresh the page.</div>
            </div>
          `;
        });
    }

    function createReviewHTML(data, initials, reviewDate) {
      const stars = '★'.repeat(data.rating) + '☆'.repeat(5 - data.rating);
      
      return `
        <div class="review-item" style="animation-delay: ${Math.random() * 0.5}s">
          <div class="review-header">
            <div class="reviewer-info">
              <div class="reviewer-avatar">${initials}</div>
              <div class="reviewer-details">
                <h4>${escapeHtml(data.name)}</h4>
                <p><i class="fas fa-calendar-alt"></i> ${reviewDate}</p>
              </div>
            </div>
            <div class="review-rating" title="${data.rating} out of 5 stars">
              ${stars}
            </div>
          </div>
          <div class="review-text">${escapeHtml(data.review)}</div>
        </div>
      `;
    }

    function updateRatingDisplay(total, count, ratingCounts) {
      const avg = count ? (total / count).toFixed(1) : '0.0';
      
      // Update overall rating
      document.getElementById('overallRating').textContent = avg;
      document.getElementById('ratingText').textContent = 
        `Based on ${count} review${count !== 1 ? 's' : ''}`;
      
      // Update star display
      updateOverallStars(parseFloat(avg));
      
      // Update rating bars with animation
      Object.keys(ratingCounts).forEach(rating => {
        const percentage = count ? (ratingCounts[rating] / count * 100) : 0;
        const bar = document.getElementById(`bar-${rating}`);
        const countElement = document.getElementById(`count-${rating}`);
        
        // Animate bar width
        setTimeout(() => {
          bar.style.width = percentage + '%';
        }, 200);
        
        // Animate count
        animateNumber(countElement, 0, ratingCounts[rating], 1000);
      });
    }

    function updateOverallStars(rating) {
      const starsContainer = document.getElementById('overallStars');
      const fullStars = Math.floor(rating);
      const hasHalfStar = (rating % 1) >= 0.5;
      let starsHtml = '';
      
      for (let i = 0; i < 5; i++) {
        if (i < fullStars) {
          starsHtml += '<i class="fas fa-star"></i>';
        } else if (i === fullStars && hasHalfStar) {
          starsHtml += '<i class="fas fa-star-half-alt"></i>';
        } else {
          starsHtml += '<i class="far fa-star"></i>';
        }
      }
      
      starsContainer.innerHTML = starsHtml;
    }

    // Utility Functions
    function getInitials(name) {
      return name.split(' ')
        .map(n => n[0])
        .join('')
        .toUpperCase()
        .substring(0, 2);
    }

    function formatDate(date) {
      const options = { 
        year: 'numeric', 
        month: 'short', 
        day: 'numeric' 
      };
      return date.toLocaleDateString('en-US', options);
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function animateNumber(element, start, end, duration) {
      const range = end - start;
      const minTimer = 50;
      const stepTime = Math.abs(Math.floor(duration / range));
      const timer = Math.max(stepTime, minTimer);
      const startTime = new Date().getTime();
      const endTime = startTime + duration;
      
      function run() {
        const now = new Date().getTime();
        const remaining = Math.max((endTime - now) / duration, 0);
        const value = Math.round(end - (remaining * range));
        element.textContent = value;
        
        if (value === end) {
          clearInterval(counter);
        }
      }
      
      const counter = setInterval(run, timer);
      run();
    }

    function animateReviews() {
      const reviews = document.querySelectorAll('.review-item');
      reviews.forEach((review, index) => {
        review.style.animation = `scaleIn 0.6s ease-out ${index * 0.1}s both`;
      });
    }

    // Scroll to Top Functionality
    function initializeScrollToTop() {
      window.addEventListener('scroll', () => {
        if (window.pageYOffset > 300) {
          scrollTopBtn.classList.add('visible');
        } else {
          scrollTopBtn.classList.remove('visible');
        }
      });

      scrollTopBtn.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    }

    // Notification System
    function showNotification(message, type = 'info') {
      // Remove existing notifications
      const existingNotifications = document.querySelectorAll('.notification');
      existingNotifications.forEach(n => n.remove());

      const notification = document.createElement('div');
      notification.className = `notification notification-${type}`;
      notification.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
        <span>${message}</span>
        <button class="notification-close">
          <i class="fas fa-times"></i>
        </button>
      `;

      // Add notification styles
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? 'var(--success-gradient)' : 
                    type === 'error' ? 'var(--danger-gradient)' : 
                    'var(--primary-gradient)'};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-lg);
        z-index: 10000;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        max-width: 400px;
        animation: slideInRight 0.5s ease-out;
      `;

      document.body.appendChild(notification);

      // Close functionality
      const closeBtn = notification.querySelector('.notification-close');
      closeBtn.addEventListener('click', () => {
        notification.style.animation = 'slideOutRight 0.5s ease-out';
        setTimeout(() => notification.remove(), 500);
      });

      // Auto close after 5 seconds
      setTimeout(() => {
        if (notification.parentNode) {
          notification.style.animation = 'slideOutRight 0.5s ease-out';
          setTimeout(() => notification.remove(), 500);
        }
      }, 5000);
    }

    // Add notification animations to CSS
    const notificationStyles = document.createElement('style');
    notificationStyles.textContent = `
      @keyframes slideInRight {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      
      @keyframes slideOutRight {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
      }
      
      .notification-close {
        background: none;
        border: none;
        color: inherit;
        cursor: pointer;
        font-size: 1.2rem;
        opacity: 0.8;
        transition: opacity 0.2s;
        margin-left: auto;
      }
      
      .notification-close:hover {
        opacity: 1;
      }
    `;
    document.head.appendChild(notificationStyles);
  </script>
</body>
</html>